# Portal smoke test env file (template)
#
# Copy this file to `portal.env` (gitignored) and fill in values.
# The portal tests (`tests/test_portal_smoke.py`) will auto-load `portal.env` if it exists.
#
# NOTE: This file is for local integration testing and contains secrets. Do NOT commit `portal.env`.
#
# Goal: keep this ordering as close to `env.example` as possible, so you can copy/paste.

# --- StudentAid servicer portal credentials ---
# These portals are `https://{provider}.studentaid.gov`, but they use the same StudentAid.gov login flow.
# So for most users, ONE username/password works across providers.
#
# NOTE: The portal smoke tests override SERVICER_PROVIDER automatically per test case (CRI/Nelnet).
SERVICER_PROVIDER=
SERVICER_USERNAME=
SERVICER_PASSWORD=
# MFA method supported by this automation: email
SERVICER_MFA_METHOD=email

# --- Loan groups to sync (required) ---
# Used by the runtime and by the portal smoke tests to help parse payment allocation tables.
LOAN_GROUPS=AA,AB,AC,AD,AE,AF,AG

# --- Gmail IMAP (for email MFA) ---
GMAIL_IMAP_USER=you@gmail.com
GMAIL_IMAP_APP_PASSWORD=
# Optional: IMAP folder/label to search (default: INBOX)
GMAIL_IMAP_FOLDER=INBOX

# Optional: narrow MFA email search
# Tip: keep these broad (subjects/senders can vary by servicer). Good defaults:
GMAIL_IMAP_SENDER_HINT=studentaid.gov
GMAIL_IMAP_SUBJECT_HINT=code

# --- Monarch credentials ---
# Use either MONARCH_TOKEN (preferred) OR email/password.
MONARCH_EMAIL=
MONARCH_PASSWORD=
MONARCH_TOKEN=
MONARCH_MFA_SECRET=

MONARCH_DUPLICATE_GUARD_USE_REFERENCE=false
MONARCH_LOAN_ACCOUNT_NAME_TEMPLATE={provider}-{group}

# --- Runtime toggles ---
LOG_LEVEL=INFO

# --- Portal smoke options (test harness only) ---
# Optional: scan limits / timeouts
# PORTAL_SMOKE_TIMEOUT=1200
# PORTAL_SMOKE_MAX_PAYMENTS=2
# PORTAL_SMOKE_PAYMENTS_SINCE=2025-01-01
#
# Optional: skip IMAP preflight (NOT recommended for true end-to-end)
# PORTAL_SMOKE_SKIP_IMAP=1
#
# Optional: override base URLs (defaults to https://{provider}.studentaid.gov)
# PORTAL_BASE_URL_CRI=https://cri.studentaid.gov
# PORTAL_BASE_URL_NELNET=https://nelnet.studentaid.gov
#
# Optional: if a provider uses a different group list than LOAN_GROUPS:
# PORTAL_LOAN_GROUPS_CRI=AA,AB
# PORTAL_LOAN_GROUPS_NELNET=AA,AB,AC
#
# Optional: if a provider requires different login creds (rare; most are shared StudentAid.gov auth):
# PORTAL_USERNAME_CRI=
# PORTAL_PASSWORD_CRI=
# PORTAL_USERNAME_NELNET=
# PORTAL_PASSWORD_NELNET=
